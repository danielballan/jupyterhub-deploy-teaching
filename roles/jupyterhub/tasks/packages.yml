---

- name: install jupyterhub dependencies via conda
  conda: name={{item}} state=present
  become: true
  with_items:
    - configurable-http-proxy
    - sqlalchemy
    - psycopg2  # for postgres support

- name: install jupyterhub via pip (the pip from the root conda env)
  pip: name={{item}} state=present editable=false executable='/opt/conda/bin/pip'
  become: true
  with_items:
    - jupyterhub==0.7.2
    - oauthenticator==0.5
